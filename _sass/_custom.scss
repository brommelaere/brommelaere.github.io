/* ==========================================================================
   CUSTOM OVERRIDES FOR ACADEMICPAGES - PROPERLY ALIGNED LAYOUT (fixed2)
   ========================================================================== */

/* ---------------------------
   NAVIGATION BAR (unchanged)
   --------------------------- */

.masthead {
  @media screen and (min-width: 64em) {
    padding-left: 0 !important;
    padding-right: 0 !important;
    border-bottom: 1px solid #e5e5e5 !important;
  }
}

.masthead__inner-wrap {
  @media screen and (min-width: 64em) {
    max-width: 1100px !important;
    margin: 0 auto !important;
    padding: 0 2rem !important;
  }
}

.masthead__menu-item {
  @media screen and (min-width: 64em) {
    padding-right: 3em !important;
  }
}

.greedy-nav {
  @media screen and (min-width: 64em) {
    padding-left: 0 !important;
    padding-right: 0 !important;
  }
}

/* ---------------------------
   MAIN WRAPPER
   --------------------------- */

#main {
  margin-top: 0 !important;
  padding-top: 0 !important;

  /* Keep two columns earlier, and allow a wider page container */
  @media screen and (min-width: 56em) {
    display: flex !important;
    align-items: flex-start !important;
    gap: 2rem !important;
    max-width: 1375px !important; /* ~25% wider than 1100px nav */
    margin: 0 auto !important;
    padding-left: 2rem !important;
    padding-right: 2rem !important;
  }
}

/* JS normally adds body padding-top equal to masthead height. Provide tiny fallback. */
:root { --nav-extra-gap: 0px; }
body  { padding-top: var(--nav-extra-gap); }

/* ---------------------------
   SIDEBAR / AUTHOR CARD
   --------------------------- */

.sidebar {
  margin-top: 0 !important;
  margin-bottom: 1em !important;
  padding-top: 0 !important;
  margin-right: 0 !important;

  @media screen and (min-width: 56em) {
    flex: 0 0 auto !important;
    align-self: flex-start !important;
    margin-top: 1.25rem !important; /* nudge image down so top aligns with text */
    padding-left: 0 !important;
    margin-right: 0 !important;
    width: auto !important;
    float: none !important;
  }

  @media screen and (max-width: 55.999em) {
    display: flex !important;
    flex-direction: column !important;
    align-items: flex-start !important;
  }
}

.author__avatar {
  margin-top: 0 !important;
  margin-bottom: 0.25rem !important;
  padding-top: 0 !important;

  img {
    max-width: 350px !important;
    width: 100% !important;
    border-radius: 6px !important;
    border: none !important;
    padding: 0 !important;
    margin: 0 !important;
    display: block !important;

    @media screen and (max-width: 55.999em) {
      max-width: 200px !important;
    }
  }
}

.author__content {
  text-align: center !important;
  margin-top: 0 !important;
  padding-top: 0 !important;

  @media screen and (max-width: 55.999em) {
    display: none !important;
  }
}

.author__name {
  font-size: 1.15rem !important;
  font-weight: 600 !important;
  margin: 0 0 0.2rem 0 !important;
  line-height: 1.2 !important;
  white-space: nowrap !important;
}

.sidebar p, .sidebar li {
  margin: 0.1rem 0 !important;
  white-space: nowrap !important;
}

.author__urls-wrapper { margin-top: 0.2rem !important; }
.author__urls-wrapper button { display: none !important; }

@media screen and (max-width: 55.999em) {
  .author__urls-wrapper { display: none !important; }
}

/* ---------------------------
   PAGE AREA
   --------------------------- */

.page {
  margin-top: 0 !important;
  padding-top: 0 !important;
  margin-left: 0 !important;
  float: none !important;

  @media screen and (min-width: 56em) {
    flex: 1 1 auto !important;
    min-width: 0 !important;
    width: auto !important;
  }
}

.page__inner-wrap { margin-top: 0 !important; padding-top: 0 !important; }
.page__title      { margin-top: 0 !important; padding-top: 0 !important; }

/* Base reading measure + global full-justification */
.page__content {
  font-size: 1.05rem !important;
  line-height: 1.7 !important;
  max-width: 52rem !important;   /* default width for content column */
  margin-top: 0 !important;
  padding-top: 0 !important;

  > *:first-child { margin-top: 0 !important; }

  /* Full justification for a neat look */
  p, li {
    text-align: justify !important;
    text-justify: inter-word;
    text-align-last: left;
    hyphens: auto;
    margin-bottom: 1.15rem !important;
  }

  @media screen and (max-width: 55.999em) {
    p, li { text-align: left !important; }
  }
}

/* Hide H1 when using 'no-title' and keep first content flush with image top */
.no-title .page__title { display: none !important; }
.no-title .page__content > *:first-child { margin-top: 0 !important; }

/* ---------------------------
   PAGE VARIANTS (via front matter classes)
   --------------------------- */

/* Wider pages (Teaching, Consulting, etc.) */
@media (min-width: 992px) {
  article.wide .page__content {
    max-width: 68rem !important;  /* ~1088px */
  }
}

/* Research: widest, with slightly smaller type; smaller still inside abstracts */
@media (min-width: 992px) {
  article.research-page .page__content {
    max-width: 72rem !important;  /* ~1152px */
    font-size: 0.98rem !important;
    line-height: 1.6 !important;
  }
  article.research-page .page__content details,
  article.research-page .page__content details p {
    font-size: 0.94rem !important;
    line-height: 1.55 !important;
    text-align: justify !important;
    text-justify: inter-word;
    text-align-last: left;
  }
}

/* Landing page (About) back to original narrow width */
@media screen and (min-width: 56em) {
  #main:has(> article.home-narrow) { max-width: 1100px !important; }  /* match nav */
  article.home-narrow .page__content { max-width: 44rem !important; }
}

/* Landing-only: a touch more image lowering if 'landing-offset' is present */
#main:has(> article.landing-offset) .sidebar { margin-top: 1.5rem !important; }

/* ---------------------------
   TEACHING PAGE
   Right-aligned years in a dedicated column
   Supports either HTML .course-rows or list items with a wrapped .year / em
   --------------------------- */

/* Preferred explicit markup: .course-rows with .row/.title/.year */
.teaching-page .course-rows {
  list-style: none !important;
  padding: 0 !important;
  margin: 0.25rem 0 0 0 !important;
  width: 100% !important;
  max-width: 68rem !important; /* align with 'wide' */
}

.teaching-page .course-rows .row {
  display: grid !important;
  grid-template-columns: 1fr auto !important; /* title left, year right */
  column-gap: 1.5rem !important;
  align-items: baseline !important;
  padding: 0.25rem 0 !important;
  width: 100% !important;
}

.teaching-page .course-rows .title {
  min-width: 0 !important;
  overflow-wrap: anywhere !important;
}

.teaching-page .course-rows .year {
  justify-self: end !important;
  white-space: nowrap !important;
  color: #555 !important;
  font-weight: 500 !important;
}

/* Fallback: if using a UL list but the year is wrapped */
.teaching-page .page__content ul.course-list,
.teaching-page .page__content ul.courses {
  list-style: none !important;
  padding-left: 0 !important;
  margin-left: 0 !important;
}

.teaching-page .page__content ul.course-list > li,
.teaching-page .page__content ul.courses > li {
  display: grid !important;
  grid-template-columns: 1fr auto !important;
  column-gap: 1.25rem !important;
  align-items: baseline !important;
  padding: 0.25rem 0 !important;
}

.teaching-page .page__content ul.course-list > li .year,
.teaching-page .page__content ul.courses > li .year,
.teaching-page .page__content ul.course-list > li em:last-child,
.teaching-page .page__content ul.courses > li em:last-child {
  grid-column: 2 !important;
  justify-self: end !important;
  white-space: nowrap !important;
  color: #555 !important;
  font-weight: 500 !important;
}

.teaching-page .page__content ul.course-list > li > :not(.year):not(em:last-child) {
  grid-column: 1 !important;
}

/* Very small screens: stack gracefully */
@media (max-width: 30em) {
  .teaching-page .course-rows .row,
  .teaching-page .page__content ul.course-list > li,
  .teaching-page .page__content ul.courses > li {
    grid-template-columns: 1fr !important;
  }
  .teaching-page .course-rows .year,
  .teaching-page .page__content ul.course-list > li .year,
  .teaching-page .page__content ul.courses > li .year,
  .teaching-page .page__content ul.course-list > li em:last-child,
  .teaching-page .page__content ul.courses > li em:last-child {
    justify-self: start !important;
  }
}

/* ---------------------------
   FOOTER
   --------------------------- */

.page__footer,
.page__footer footer {
  background: transparent !important;
}

/* ---------------------------
   MISC RESPONSIVE
   --------------------------- */

@media screen and (max-width: 43.75em) {
  .author__avatar img { max-width: 160px !important; }
}
@media screen and (max-width: 34.375em) {
  .author__avatar img { max-width: 140px !important; }
}
